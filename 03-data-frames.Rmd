---
title: The `data.frame` class
author: Data Carpentry contributors
minutes: 30
---

```{r, echo=FALSE, purl=FALSE, message = FALSE}
source("setup.R")
surveys <- read.csv("data/portal_data_joined.csv")
```

```{r, echo=FALSE, purl=TRUE}
## The data.frame class
```

------------

> ## Learning Objectives
>
> * Read data from a file into a data.frame.
> * Change how character strings are handled in a data.frame.

------------

## What are data frames?

Data frames are the _de facto_ data structure for most tabular data, and what we
use for statistics and plotting.

A data frame is a collection of vectors of identical lengths. Each vector
represents a column, and each vector can be of a different data type (e.g.,
characters, integers, factors). The `str()` function is useful to inspect the
data types of the columns.

A data frame can be created by hand, but most commonly they are generated by the
functions `read.csv()` or `read.table()`; in other words, when importing
spreadsheets from your hard drive (or the web).

By default, when building or importing a data frame, the columns that contain
characters (i.e., text) are coerced (=converted) into the `factor` data
type. Depending on what you want to do with the data, you may want to keep these
columns as `character`. To do so, `read.csv()` and `read.table()` have an
argument called `stringsAsFactors` which can be set to `FALSE`.

Compare the output of `str(surveys)` when setting `stringsAsFactors = TRUE`
(default) and `stringsAsFactors = FALSE`:


```{r, eval=FALSE, purl=FALSE}
## Compare the difference between when the data are being read as
## `factor`, and when they are being read as `character`.
surveys <- read.csv("data/portal_data_joined.csv", stringsAsFactors = TRUE)
str(surveys)
surveys <- read.csv("data/portal_data_joined.csv", stringsAsFactors = FALSE)
str(surveys)
```

> ### Challenge
>
> 1. We have seen how data frames are created when using the `read.csv()`, but
>   they can also be created by hand with the `data.frame()` function.  There are
>   a few mistakes in this hand-crafted `data.frame`, can you spot and fix them?
>   Don't hesitate to experiment!
>
>     ```{r, eval=FALSE, purl=FALSE}
>     animal_data <- data.frame(animal=c("dog", "cat", "sea cucumber", "sea urchin"),
>                               feel=c("furry", "squishy", "spiny"),
>                               weight=c(45, 8 1.1, 0.8))
>     ```
>
>     ```{r, eval=FALSE, purl=TRUE, echo=FALSE}
>     ## Challenge:
>     ##  There are a few mistakes in this hand-crafted `data.frame`,
>     ##  can you spot and fix them? Don't hesitate to experiment!
>     animal_data <- data.frame(animal=c(dog, cat, sea cucumber, sea urchin),
>                               feel=c("furry", "squishy", "spiny"),
>                               weight=c(45, 8 1.1, 0.8))
>     ```
>
> 2. Can you predict the class for each of the columns in the following example?
>    Check your guesses using `str(country_climate)`:
>      * Are they what you expected?  Why? Why not?
>      * What would have been different if we had added `stringsAsFactors = FALSE` to this call?
>      * What would you need to change to ensure that each column had the accurate data type?
>
>     ```{r, eval=FALSE, purl=FALSE}
>     country_climate <- data.frame(country=c("Canada", "Panama", "South Africa", "Australia"),
>                                    climate=c("cold", "hot", "temperate", "hot/temperate"),
>                                    temperature=c(10, 30, 18, "15"),
>                                    northern_hemisphere=c(TRUE, TRUE, FALSE, "FALSE"),
>                                    has_kangaroo=c(FALSE, FALSE, FALSE, 1))
>     ```
>
>    ```{r, eval=FALSE, purl=TRUE, echo=FALSE}
>    ## Challenge:
>    ##   Can you predict the class for each of the columns in the following
>    ##   example?
>    ##   Check your guesses using `str(country_climate)`:
>    ##   * Are they what you expected? Why? why not?
>    ##   * What would have been different if we had added `stringsAsFactors = FALSE`
>    ##     to this call?
>    ##   * What would you need to change to ensure that each column had the
>    ##     accurate data type?
>    country_climate <- data.frame(country=c("Canada", "Panama", "South Africa", "Australia"),
>                                   climate=c("cold", "hot", "temperate", "hot/temperate"),
>                                   temperature=c(10, 30, 18, "15"),
>                                   northern_hemisphere=c(TRUE, TRUE, FALSE, "FALSE"),
>                                   has_kangaroo=c(FALSE, FALSE, FALSE, 1))
>    ```
>
>    <!--- Answers
>
>    ```{r, eval=FALSE, echo=FALSE, purl=FALSE}
>    ## Answers
>    ## * missing quotations around the names of the animals
>    ## * missing one entry in the "feel" column (probably for one of the furry animals)
>    ## * missing one comma in the weight column
>
>    ## Answers
>    ## * `country`, `climate`, `temperature`, and `northern_hemisphere` are
>    ##    factors; `has_kangaroo` is numeric.
>    ## * using `stringsAsFactors=FALSE` would have made them character instead of
>    ##   factors
>    ## * removing the quotes in temperature, northern_hemisphere, and replacing 1
>    ##   by TRUE in the `has_kangaroo` column would probably what was originally
>    ##   intended.
>    ```
>
>    -->
>
>    The automatic conversion of data type is sometimes a blessing, sometimes an
>    annoyance. Be aware that it exists, learn the rules, and double check that
>    data you import in R are of the correct type within your data frame. If not,
>    use it to your advantage to detect mistakes that might have been introduced
>    during data entry (a letter in a column that should only contain numbers for
>    instance.).
